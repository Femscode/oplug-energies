@extends('frontend.master')
@section('header')
<link rel="stylesheet" href="{{ url('homepage/css/index.css') }}" />
@endsection
@section('content')
<div class="quick-links">
    <div class="left">
        <div class="frame">
            <p class="link-SALE-OFF">SHOP NOW, GET UP TO 40% OFF</p>
            <div class="all-categories">
                <div class="inverters">
                    <div class="list-item-link">
                        <div class="text-wrapper">Inverters</div>
                    </div>
                    <div class="div">
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Infini-Solar Inverters</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Solis Inverters</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Galaxy Solar Inverters</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">East Inverters</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Deye Inverters</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Huawei Inverters</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Growatt Inverters</div>
                        </div>
                    </div>
                </div>
                <div class="inverters-2">
                    <div class="list-item-link">
                        <div class="text-wrapper">Solar Panels</div>
                    </div>
                    <div class="div">
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Galaxy Solar Panels</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Jinko Solar Panels</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">ZNSHINESOLA Panels</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">JA Solar Panels</div>
                        </div>
                    </div>
                </div>
                <div class="inverters-2">
                    <div class="list-item-link">
                        <div class="text-wrapper">Lithium Batteries</div>
                    </div>
                </div>
                <div class="inverters-2">
                    <div class="list-item-link">
                        <div class="text-wrapper">Accessories</div>
                    </div>
                    <div class="div">
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Mounting kits</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">UPS</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">Bracket</div>
                        </div>
                    </div>
                </div>
                <div class="inverters">
                    <div class="list-item-link">
                        <div class="list-item-link-3">All-in-one Solutions</div>
                    </div>
                    <div class="div">
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">All-In-one Solar Generators</div>
                        </div>
                        <div class="list-item-link-wrapper">
                            <div class="list-item-link-2">All-in-one Street Light</div>
                        </div>
                    </div>
                </div>
                <div class="inverters-2">
                    <div class="list-item-link">
                        <div class="text-wrapper">Home Appliances</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="center">
        <div class="big-group">
            <div class="frame-2">
                <div class="frame-3">
                    <div class="group-heading">S6-EH1P(3-6)K-L-EU</div>
                    <div class="group-heading-2">3K/3.6K/4.6K/5K/6K</div>
                </div>
                <div class="frame-4">
                    <div class="group-list-item">Automatic UPS Switching</div>
                    <div class="group-list-item-2">Supports Peak Shaving Mode</div>
                    <p class="group-list-item-2">Compatible With Multiple Brands Of Lithium Battery Models</p>
                </div>
                <div class="group">
                    <div class="buy-now">BUY NOW</div>
                </div>
            </div>
        </div>
        <div class="frame-5">
            <div class="div-img">
                <div class="frame-6">
                    <p class="heading-sono"><span class="span">Install your solar for as low as </span><span class="text-wrapper-2">₦40,000</span></p>
                    <div class="link-discover-now">
                        <div class="link-discover-now-2">LEARN MORE</div>
                    </div>
                </div>
            </div>
            <div class="div-img-2">
                <p class="heading-logitek"><span class="text-wrapper-3">Top Quality</span><span class="span">&nbsp;</span><span class="text-wrapper-2">Lithium (LFP) Battery</span></p>
                <div class="link-discover-now-wrapper">
                    <div class="link-discover-now-3">DISCOVER MORE</div>
                </div>
            </div>
        </div>
    </div>
    <div class="right">
        <div class="png">
            <div class="frame-7">
                <div class="small-xomia">JINKO SOLAR</div>
                <div class="frame-3">
                    <div class="heading-sport">Low Light Champion</div>
                    <div class="heading-sport-2">Tiger Neo III</div>
                </div>
                <div class="link">
                    <div class="shop-now">SHOP NOW</div>
                </div>
            </div>
        </div>
        <div class="slider-png">
            <p class="heading-strong"><span class="text-wrapper-4">SOLIS</span><span class="text-wrapper-6"> RELIABLE INVERTERS NOW AVAILABLE</span></p>
            <div class="frame-3"><br>
                <div class="small-from">FROM AS LOW AS</div>
                <div class="heading">₦150,000</div>
            </div>
            <div class="link-discover-now">
                <div class="link-discover-now-4" style="color:black;cursor:pointer">SHOP NOW</div>
            </div>
        </div>
    </div>
</div>

<div class="lower">
    <div class="main">
        <div class="frame">
            <div class="heading-featured">FEATURED BRANDS</div>
            <div class="link-view-all">
                <div class="text-wrapper">View All</div>
            </div>
        </div>
        <div class="div">
            <img class="infini-solar" src="{{ url('homepage/images/brands/infinisolar.png') }}" />
            <img class="element" src="{{ url('homepage/images/brands/solis.png') }}" />
            <img class="logony" src="{{ url('homepage/images/brands/east.png') }}" />
            <img class="deye" src="{{ url('homepage/images/brands/deye.png') }}" />
            <img class="EAST-LOGO" src="{{ url('homepage/images/brands/znshine.png') }} " />
            <img class="ja-solar-logo-png" src="{{ url('homepage/images/brands/ja-solar.png') }}" />
            <img class="logo-pylontech" src="{{ url('homepage/images/brands/pylon-tech.png') }}" />
            <img class="growatt-logo" src="{{ url('homepage/images/brands/growatt-logo.png') }}" />
            <img class="images" src="{{ url('homepage/images/brands/infinisolar.png') }}" />
        </div>
    </div>
    <div class="main">
        <div class="frame">
            <div class="frame-2">
                <div class="heading-top">TOP CATEGORIES</div>
                <!-- <div class="link-view-all">
                    <div class="text-wrapper">View All</div>
                </div> -->
            </div>
            <div class="div-arrows">
                <div class="vector-wrapper">←</div>
                <div class="img-wrapper">→</div>
            </div>
        </div>
        <div class="scrolling">
                @foreach($categories as $index => $category)
                @php
                $categoryImageUrl = 'https://oplugenergies.com/oplug_files/public/uploads/categories/' . $category->image;
                @endphp
                <div class="frame-{{ $index + 3 }}">
                    <a href="{{ route('shop.category', $category->slug) }}" style="text-decoration: none; color: inherit;">
                             <div class="group-link{{ $index === 1 ? '-prod' : ($index > 1 ? '-' . $index : '') }}" style="background-image: url('{{ $categoryImageUrl }}'); background-size: cover; background-position: center;"></div>
                       
                        <div class="{{ $index < 2 ? 'text-wrapper-2' : 'group-link-' . ($index + 2) }}">{{ $category->name }}</div>
                    </a>
                </div>
                @endforeach
           
        </div>
    </div>
</div>

<div class="deals-of-the-day">
    <div class="frame">
        <div class="div">
            <div class="main" style="background-image:url('/homepage/images/home/main.png')">
                <div class="frame-2">
                    <div class="heading-deals-of">DEALS OF THE DAY</div>
                    <div class="link-view-all">View All</div>
                </div>
                <div class="symbol">→</div>
            </div>
            <div class="deal-of-the-day">
                @if($dealOfTheDay)
                <div class="product">
                    <!-- Image Gallery Container -->
                    <div class="image-gallery-container" style="display: flex; gap: 15px; width: 100%; max-width: 500px;">
                        @if($dealOfTheDay->image)
                        @php
                        $images = json_decode($dealOfTheDay->image, true);
                        $images = is_array($images) && !empty($images) ? $images : [];
                        @endphp
                        @endif
                        
                        @if(!empty($images))
                        <!-- Thumbnail Gallery on Left -->
                        <div class="thumbnail-gallery" style="display: flex; flex-direction: column; gap: 10px; flex-shrink: 0;">
                            @foreach($images as $index => $image)
                                @php
                                $thumbImageUrl = asset('https://www.oplugenergies.com/oplug_files/public/uploads/products/' . $image);
                                $borderColor = $index === 0 ? '#007bff' : 'transparent';
                                @endphp
                                <div class="group-prod-png thumbnail-image {{ $index === 0 ? 'active' : '' }}" 
                                     data-image="{{ $thumbImageUrl }}" 
                                     style="width: 80px; height: 80px; background-image: url({{ $thumbImageUrl }}); background-size: cover; background-position: center; cursor: pointer; border-radius: 8px; border: 2px solid {{ $borderColor }}; transition: all 0.2s ease;"
                                     onclick="switchMainImage('{{ $thumbImageUrl }}', this)"></div>
                            @endforeach
                        </div>
                        
                        <!-- Main Preview Image -->
                        @php
                        $mainImageUrl = asset('https://www.oplugenergies.com/oplug_files/public/uploads/products/' . $images[0]);
                        @endphp
                        <div class="main-image-container" style="flex: 1; height: 350px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                            <div class="group-png main-product-image" id="mainProductImage" 
                                 style="width: 100%; height: 100%; background-image: url('{{ $mainImageUrl }}'); background-size: cover; background-position: center; transition: all 0.3s ease;"></div>
                        </div>
                        @else
                        <!-- Fallback when no images available -->
                        <div class="thumbnail-gallery" style="display: flex; flex-direction: column; gap: 10px; flex-shrink: 0;">
                            <!-- No thumbnails when no images available -->
                        </div>
                        
                        @php
                        $defaultImageUrl = asset('homepage/images/default-product.png');
                        @endphp
                        <div class="main-image-container" style="flex: 1; height: 350px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                            <div class="group-png main-product-image" id="mainProductImage" 
                                 style="width: 100%; height: 100%; background-color: #f5f5f5; background-image: url('{{ $defaultImageUrl }}'); background-size: cover; background-position: center;"></div>
                        </div>
                        @endif
                    </div>
                    <div class="png">
                        <div class="div-dis-card">
                            <div class="small-save">SAVE</div>
                            @if($dealOfTheDay->discount_price)
                            <div class="heading">₦{{ number_format($dealOfTheDay->price - $dealOfTheDay->discount_price) }}</div>
                            @else
                            <div class="heading">₦150,000</div>
                            @endif
                        </div>
                    </div>
                </div>
                <div class="frame-3">
                    <div class="frame-4">
                        <a href="{{ route('prd', $dealOfTheDay->slug) }}" class="heading-link-xioma" style="text-decoration: none; color: inherit;">{{ $dealOfTheDay->name }}</a>
                        <div class="text-wrapper">{{ $dealOfTheDay->category->name ?? 'Product' }}</div>
                    </div>
                    <div class="details">
                        <div class="price">
                            @if($dealOfTheDay->discount_price)
                            <div class="heading-2">₦{{ number_format($dealOfTheDay->discount_price) }}</div>
                            <div class="heading-3">₦{{ number_format($dealOfTheDay->price) }}</div>
                            @else
                            <div class="heading-2">₦{{ number_format($dealOfTheDay->price) }}</div>
                            @endif
                        </div>
                        <div class="specs">
                            <div class="frame-5">
                                <div class="list-item"></div>
                                <p class="p">{{ Str::limit($dealOfTheDay->description, 100) }}</p>
                            </div>
                        </div>
                        <div class="frame-6">
                            <div class="link-free-shipping-wrapper">
                                <div class="link-free-shipping">FREE SHIPPING</div>
                            </div>
                            <div class="div-wrapper">
                                <div class="link-free-shipping-2">50% INSTALLATION</div>
                            </div>
                        </div>
                    </div>
                    <div class="frame-7" data-product-id="{{ $dealOfTheDay->id }}">
                        <div class="link">
                            <div class="shop-now">BUY NOW</div>
                        </div>
                        <div class="shop-now-wrapper">
                            <div class="shop-now-2 add-to-cart-btn" data-product-id="{{ $dealOfTheDay->id }}" style="cursor: pointer;">ADD TO CART</div>
                        </div>
                    </div>
                    <div class="frame-8">
                        <div class="hurry-up-promotion">HURRY UP!<br />PROMOTION WILL<br />EXPIRE IN</div>
                        <div class="timer">
                            <div class="div-c-card">
                                <div class="text-wrapper-2">52</div>
                                <div class="small-d">Days</div>
                            </div>
                            <div class="div-c-card">
                                <div class="text-wrapper-2">12</div>
                                <div class="small-d">Hours</div>
                            </div>
                            <div class="div-c-card">
                                <div class="text-wrapper-2">01</div>
                                <div class="small-d">Minutes</div>
                            </div>
                            <div class="div-c-card">
                                <div class="text-wrapper-2">03</div>
                                <div class="small-d">Seconds</div>
                            </div>
                        </div>
                    </div>
                    <div class="div-progress-content">
                        <div class="div-progress">
                            <div class="progressbar"></div>
                        </div>
                        <p class="sold"><span class="span">Sold: </span> <span class="text-wrapper-3">{{ $dealOfTheDay->stock_quantity > 0 ? '26/75' : 'Out of Stock' }}</span></p>
                    </div>
                </div>
                @else
                <div class="product">
                    <div class="div-swiper-wrapper">
                        <div class="group-png"></div>
                        <div class="group-prod-png"></div>
                        <div class="group-prod-png"></div>
                        <div class="group-prod-png"></div>
                        <div class="group-prod-png"></div>
                    </div>
                    <div class="png">
                        <div class="div-dis-card">
                            <div class="small-save">SAVE</div>
                            <div class="heading">₦150,000</div>
                        </div>
                    </div>
                </div>
                <div class="frame-3">
                    <div class="frame-4">
                        <div class="heading-link-xioma">No Deal Available</div>
                        <div class="text-wrapper">Product</div>
                    </div>
                    <div class="details">
                        <div class="price">
                            <div class="heading-2">₦0</div>
                        </div>
                        <div class="specs">
                            <div class="frame-5">
                                <div class="list-item"></div>
                                <p class="p">No products available for deal of the day</p>
                            </div>
                        </div>
                        <div class="frame-6">
                            <div class="link-free-shipping-wrapper">
                                <div class="link-free-shipping">FREE SHIPPING</div>
                            </div>
                            <div class="div-wrapper">
                                <div class="link-free-shipping-2">50% INSTALLATION</div>
                            </div>
                        </div>
                    </div>
                    <div class="frame-7">
                        <div class="link">
                            <div class="shop-now">BUY NOW</div>
                        </div>
                        <div class="shop-now-wrapper">
                            <div class="shop-now-2">ADD TO CART</div>
                        </div>
                    </div>
                    <div class="frame-8">
                        <div class="hurry-up-promotion">HURRY UP!<br />PROMOTION WILL<br />EXPIRE IN</div>
                        <div class="timer">
                            <div class="div-c-card">
                                <div class="text-wrapper-2">52</div>
                                <div class="small-d">Days</div>
                            </div>
                            <div class="div-c-card">
                                <div class="text-wrapper-2">12</div>
                                <div class="small-d">Hours</div>
                            </div>
                            <div class="div-c-card">
                                <div class="text-wrapper-2">01</div>
                                <div class="small-d">Minutes</div>
                            </div>
                            <div class="div-c-card">
                                <div class="text-wrapper-2">03</div>
                                <div class="small-d">Seconds</div>
                            </div>
                        </div>
                    </div>
                    <div class="div-progress-content">
                        <div class="div-progress">
                            <div class="progressbar"></div>
                        </div>
                        <p class="sold"><span class="span">Sold: </span> <span class="text-wrapper-3">0/0</span></p>
                    </div>
                </div>
                @endif
            </div>
        </div>
        <div class="frame-9">
            <div class="main-section-link" style="background-image:url('/homepage/images/dod1.png')"></div>
            <div class="main-section-link-2" style="background-image:url('/homepage/images/dod2.png')"></div>
            <div class="main-section-link-3" style="background-image:url('/homepage/images/dod3.png')"></div>
        </div>
    </div>
    <div class="main-2" style="background-image:url('/homepage/images/home/main1.png');background-size:cover">
        <div class="heading-FREE">ENJOY FREE INSTALLATION</div>
        <p class="heading-with-no">
            <span class="text-wrapper-4">Shop Items worth over ₦5,000,000 to enjoy this.</span>
            <span class="text-wrapper-5">&nbsp;</span>
            <span class="text-wrapper-6">*Restrictions apply</span>
        </p>
        <div class="link-discover-now">
            <div class="link-discover-now-2">SHOP NOW</div>
        </div>
    </div>
</div>

<div class="best-seller">
    <div class="frame">
        <div class="tablist-tab-best-wrapper">
            <div class="tablist-tab-best">BEST SELLER</div>
        </div>
        <div class="link-view-all">View All</div>
    </div>
    <div class="tabpanel">
       
        @foreach($featuredProducts->take(6) as $index => $product)
        @php
        $images = $product->image ? json_decode($product->image, true) : [];
        $firstImage = !empty($images) ? $images[0] : null;
        $featuredProductImageUrl = $firstImage ? 'https://www.oplugenergies.com/oplug_files/public/uploads/products/' . $firstImage : asset('homepage/images/default-product.png');
        @endphp
        <div class="group{{ $index > 0 ? '-' . ($index + 1) : '' }}">
            <div class="div">
                <a href="{{ route('prd', $product->slug) }}" class="link" style="text-decoration: none;">
                    <div class="png{{ $index > 0 ? '-' . ($index + 1) : '' }}" style="background-image: url('{{ $featuredProductImageUrl }}'); background-size: cover; background-position: center;"></div>
                </a>
                <div class="frame-2">
                    <div class="heading-link-xioma{{ $index > 2 ? '-wrapper' : '' }}">
                        <a href="{{ route('prd', $product->slug) }}" class="text-wrapper{{ $index > 3 ? '' : '' }}" style="text-decoration: none; color: inherit;">{{ Str::limit($product->name, 25) }}</a>
                    </div>
                    <div class="heading-link-xioma-2">{{ $product->category->name ?? 'Product' }}</div>
                </div>
                <div class="frame-3">
                    @if($product->discount_price)
                    <div class="heading">₦{{ number_format($product->discount_price) }}</div>
                    <div class="heading-2">₦{{ number_format($product->price) }}</div>
                    @else
                    <div class="heading">₦{{ number_format($product->price) }}</div>
                    @endif
                </div>
                <div class="frame-4">
                    @if($product->stock_quantity > 0)
                    <div class="symbol"><img src='{{ url("homepage/images/svgs/active.svg") }}' alt="active" /></div>
                    <div class="in-stock">In stock</div>
                    @else
                    <div class="symbol-2"><img src='{{ url("homepage/images/svgs/cancel.svg") }}' alt="cancel" /></div>
                    <div class="text-wrapper-2">Out of Stock</div>
                    @endif
                </div>
            </div>
            @if($product->discount_price)
            <div class="div-dis-card">
                <div class="small-save">SAVE</div>
                <div class="heading-3">₦{{ number_format($product->price - $product->discount_price) }}</div>
            </div>
            @endif
            <div class="link-wrapper">
                @if($product->stock_quantity > 0)
                <div class="shop-now-wrapper" data-product-id="{{ $product->id }}">
                    <div class="shop-now add-to-cart-btn" data-product-id="{{ $product->id }}" style="cursor: pointer;">ADD TO CART</div>
                </div>
                @else
                <div class="shop-now-wrapper" data-product-id="{{ $product->id }}">
                    <div class="shop-now disabled" style="cursor: pointer;">OUT OF STOCK</div>
                </div>
                @endif
            </div>
        </div>
        @endforeach
      


    </div>

</div>

<div class="brand-new">
    <div class="brand-new-frame">
        <div class="brand-new-heading-wrapper">
            <div class="brand-new-heading">BRAND NEW FOR YOU</div>
        </div>
        <div class="brand-new-arrows">
            <div class="brand-new-vector-wrapper">→</div>
            <div class="brand-new-vector-wrapper">←</div>
        </div>
    </div>
    <div class="brand-new-tabpanel">
        <div class="brand-new-item">
            <div class="brand-new-link" style="background-image:url('/homepage/images/home/prod16.png')"></div>
            <div class="brand-new-group-heading">Huawei Solar</div>
            <p class="brand-new-description">From residential to industrial solar solutions</p>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-2">
            <div class="brand-new-link-2" style="background-image:url('/homepage/images/home/prod17.png')"></div>
            <div class="brand-new-group-heading">InfiniSolar</div>
            <p class="brand-new-description">Off Grid Storage Inverters, Batteries and ESS</p>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-3">
            <div class="brand-new-link-3" style="background-image:url('/homepage/images/home/prod15.png')"></div>
            <div class="brand-new-group-heading">Solis</div>
            <p class="brand-new-description">Tier 1 Power Inverter List</p>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-4">
            <div class="brand-new-link-4" style="background-image:url('/homepage/images/home/prod18.png')"></div>
            <div class="brand-new-group-heading">Jinko Solar</div>
            <p class="brand-new-text">Leading PV module manufacturer and energy storage system integrator.</p>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-5">
            <div class="brand-new-link-5" style="background-image:url('/homepage/images/home/prod15.png')"></div>
            <div class="brand-new-group-heading">Deye</div>
            <p class="brand-new-text">Range from 1.5-110kW, Hybrid inverter 3kW-50kW, and microinverter 300W-2000W.</p>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-6">
            <div class="brand-new-link-6" style="background-image:url('/homepage/images/home/prod16.png')"></div>
            <div class="brand-new-group-heading">East</div>
            <p class="brand-new-text">On and Off Grid, Hybrid inverters and monitoring solutions</p>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-7">
            <div class="brand-new-link-7" style="background-image:url('/homepage/images/home/prod17.png')"></div>
            <div class="brand-new-group-heading">JA Solar</div>
            <div class="brand-new-text">Solar panels: PV Modules</div>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-8">
            <div class="brand-new-link-8" style="background-image:url('/homepage/images/home/prod18.png')"></div>
            <div class="brand-new-group-heading">Pylontech</div>
            <div class="brand-new-description">Dedicated energy storage system provider</div>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-9">
            <div class="brand-new-link-9" style="background-image:url('/homepage/images/home/prod15.png')"></div>
            <div class="brand-new-group-heading">Growatt</div>
            <p class="brand-new-text">From PV systems to energy storage to EV chargers</p>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
        <div class="brand-new-item-10">
            <div class="brand-new-link-10" style="background-image:url('/homepage/images/home/prod16.png')"></div>
            <div class="brand-new-group-heading">ZNShineSolar</div>
            <p class="brand-new-description">From residential to industrial solar solutions</p>
            <div class="brand-new-action">
                <div class="brand-new-shop-now">EXPLORE</div>
            </div>
        </div>
    </div>
</div>

<div class="solar-inverters">
    <div class="solar-inverters-frame">
        <div class="solar-inverters-heading-wrapper">
            <div class="solar-inverters-heading">THE BEST SOLAR INVERTERS</div>
        </div>
        <div class="solar-inverters-view-all">View All</div>
    </div>
    <div class="solar-inverters-top-info">
        <div class="solar-inverters-img">
            <div class="solar-inverters-png" style="background-image:url('/homepage/images/home/div-img.png');background-size:cover">
                <div class="solar-inverters-info">
                    <p class="solar-inverters-mobok">
                        <span class="solar-inverters-text-bold">Beta Inverter Dey Here<br /></span>
                        <span class="solar-inverters-text-light">Oplug Get Am</span>
                    </p>
                    <p class="solar-inverters-starting-from">
                        <span class="solar-inverters-text">Starting from </span>
                        <span class="solar-inverters-price">₦373,000</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="solar-inverters-key-products">
            @if($categories && $categories->count() > 0)
                @foreach($categories as $category)
                <div class="solar-inverters-item">
                    <a href="{{ route('shop.category', $category->slug) }}" style="text-decoration: none; color: inherit;">
                        <div class="solar-inverters-item-frame">
                            <div class="solar-inverters-item-heading">{{ $category->name }}</div>
                            <div class="solar-inverters-item-count">{{ $category->products_count }} Items</div>
                        </div>
                        @if($category->image)
                            <div class="solar-inverters-item-img" style="background-image: url('https://oplugenergies.com/oplug_files/public/uploads/categories/{{ $category->image }}'); background-size: cover; background-position: center;"></div>
                        @else
                            <div class="img-prod"></div>
                        @endif
                    </a>
                </div>
                @endforeach
            @else
                <div class="solar-inverters-item">
                    <div class="solar-inverters-item-frame">
                        <div class="solar-inverters-item-heading">No Categories</div>
                        <div class="solar-inverters-item-count">0 Items</div>
                    </div>
                    <div class="solar-inverters-item-img-prod"></div>
                </div>
            @endif
        </div>
    </div>
    <div class="solar-inverters-tabpanel">
       
        @foreach($popularProducts->take(6) as $index => $product)
        @php
            $images = $product->image ? json_decode($product->image, true) : [];
            $firstImage = !empty($images) ? $images[0] : null;
            $hasDiscount = $product->discount_price && $product->discount_price < $product->price;
            $currentPrice = $hasDiscount ? $product->discount_price : $product->price;
            $oldPrice = $hasDiscount ? $product->price : null;
        @endphp
        <div class="solar-inverters-group">
            <div class="solar-inverters-product-frame">
                <a href="{{ route('prd', $product->slug) }}" class="solar-inverters-product-img-wrapper" style="text-decoration: none;">
                    <div class="solar-inverters-product-img" style="background-image: url({{ $firstImage ? 'https://oplugenergies.com/oplug_files/public/uploads/products/' . $firstImage : asset('homepage/images/default-product.png') }})"></div>
                </a>
                <div class="solar-inverters-prd">
                    <div class="solar-inverters-product-title">
                        <a href="{{ route('prd', $product->slug) }}" class="solar-inverters-product-title-text" style="text-decoration: none; color: inherit;">{{ $product->name }}</a>
                    </div>
                    <div class="solar-inverters-product-category">{{ $product->category->name ?? 'Product' }}</div>
                </div>
                <div class="solar-inverters-product-price">
                    <div class="solar-inverters-product-current-price">₦{{ number_format($currentPrice, 0) }}</div>
                    @if($oldPrice)
                    <div class="solar-inverters-product-old-price">₦{{ number_format($oldPrice, 0) }}</div>
                    @endif
                </div>
                <div class="solar-inverters-product-status">
                    @if($product->stock_quantity > 0)
                    <div class="solar-inverters-product-status-icon"><img src='{{ url("homepage/images/svgs/active.svg") }}' alt="active" /></div>
                    <div class="solar-inverters-product-status-text">In stock</div>
                    @else
                    <div class="solar-inverters-product-status-icon"><img src='{{ url("homepage/images/svgs/cancel.svg") }}' alt="cancel" /></div>
                    <div class="solar-inverters-product-status-text">Out of stock</div>
                    @endif
                </div>
            </div>
            <div class="solar-inverters-product-action" data-product-id="{{ $product->id }}">
                @if($product->stock_quantity > 0)
                <div class="solar-inverters-product-action-link add-to-cart-btn" data-product-id="{{ $product->id }}" style="cursor: pointer;">
                    <div class="solar-inverters-product-action-text">ADD TO CART</div>
                </div>
                @else
                <div class="solar-inverters-product-action-link" style="cursor: pointer;">
                    <div class="solar-inverters-product-action-text disabled">OUT OF STOCK</div>
                </div>
                @endif
            </div>
        </div>
        @endforeach
      
    </div>

</div>

<div class="solar-panels">
    <div class="solar-panels-frame">
        <div class="solar-panels-heading-wrapper">
            <div class="solar-panels-heading">QUALITY SOLAR PANELS</div>
        </div>
        <div class="solar-panels-view-all">View All</div>
    </div>
    <div class="solar-panels-top-info">
        <div class="solar-panels-img" style="background-image:url('/homepage/images/home/catch-the-sun.png');background-size:cover">
            <div class="solar-panels-png">
                <div class="solar-panels-info">
                    <p class="solar-panels-mobok">
                        <span class="solar-panels-text-bold">Catch Sun, Save Bill<br /></span>
                        <span class="solar-panels-text-light">Shop On Oplug</span>
                    </p>
                    <p class="solar-panels-starting-from">
                        <span class="solar-panels-text">Starting from </span>
                        <span class="solar-panels-price">₦98,000</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="solar-panels-key-products">
            <div class="solar-panels-item">
                <div class="solar-panels-item-frame">
                    <div class="solar-panels-item-heading">Galaxy</div>
                    <div class="solar-panels-item-count">55 Items</div>
                </div>
                <div class="solar-panels-item-img" style="background-image:url('/homepage/images/home/brand1.png');background-size:cover"></div>
            </div>
            <div class="solar-panels-item">
                <div class="solar-panels-item-frame">
                    <div class="solar-panels-item-heading">Jinko</div>
                    <div class="solar-panels-item-count">20 Items</div>
                </div>
                <div class="solar-panels-item-img-prod" style="background-image:url('/homepage/images/home/brand2.png');background-size:cover"></div>
            </div>
            <div class="solar-panels-item">
                <div class="solar-panels-item-frame">
                    <div class="solar-panels-item-heading">ZNSHINE</div>
                    <div class="solar-panels-item-count">14 Items</div>
                </div>
                <div class="solar-panels-item-img-prod" style="background-image:url('/homepage/images/home/brand3.png');background-size:cover"></div>
            </div>
            <div class="solar-panels-item">
                <div class="solar-panels-item-frame">
                    <div class="solar-panels-item-heading">JA Solar</div>
                    <div class="solar-panels-item-count">1005 Items</div>
                </div>
                <div class="solar-panels-item-img-prod" style="background-image:url('/homepage/images/home/brand5.png');background-size:cover"></div>
            </div>
        </div>
    </div>
    <div class="solar-panels-tabpanel">
       
        @foreach($popularProducts->take(9) as $index => $product)
        @php
            $images = $product->image ? json_decode($product->image, true) : [];
            $firstImage = !empty($images) ? $images[0] : null;
            $hasDiscount = $product->discount_price && $product->discount_price < $product->price;
            $currentPrice = $hasDiscount ? $product->discount_price : $product->price;
            $oldPrice = $hasDiscount ? $product->price : null;
        @endphp
        <div class="solar-panels-group{{ $index > 0 ? '-' . ($index + 1) : '' }}">
            <div class="solar-panels-product-frame">
                <a href="{{ route('prd', $product->slug) }}" class="solar-panels-product-img-wrapper" style="text-decoration: none;">
                    <div class="solar-panels-product-img{{ $index > 0 ? '-' . ($index + 1) : '' }}" style="background-image: url('{{ $firstImage ? 'https://www.oplugenergies.com/oplug_files/public/uploads/products/' . $firstImage : asset('homepage/images/default-product.png') }}')"></div>
                </a>
                <div class="solar-panels-prd">
                    <div class="solar-panels-product-title{{ $index == 1 || $index == 3 || $index == 5 || $index == 8 ? '-wrapper' : '' }}">
                        @if($index == 1 || $index == 3 || $index == 5 || $index == 8)
                        <a href="{{ route('prd', $product->slug) }}" class="solar-panels-product-title-text" style="text-decoration: none; color: inherit;">{{ $product->name }}</a>
                        @else
                        <a href="{{ route('prd', $product->slug) }}" class="solar-panels-product-title-text" style="text-decoration: none; color: inherit;">{{ $product->name }}</a>
                        @endif
                    </div>
                    <div class="solar-panels-product-category">{{ $product->category->name ?? 'Product' }}</div>
                </div>
                <div class="solar-panels-product-price">
                    <div class="solar-panels-product-current-price">₦{{ number_format($currentPrice, 0) }}</div>
                    @if($oldPrice)
                    <div class="solar-panels-product-old-price">₦{{ number_format($oldPrice, 0) }}</div>
                    @endif
                </div>
                <div class="solar-panels-product-status">
                    @if($product->stock_quantity > 0)
                    <div class="solar-panels-product-status-icon"><img src='{{ url("homepage/images/svgs/active.svg") }}' alt="active" /></div>
                    <div class="solar-panels-product-status-text">In stock</div>
                    @else
                    <div class="solar-panels-product-status-icon"><img src='{{ url("homepage/images/svgs/cancel.svg") }}' alt="cancel" /></div>
                    <div class="solar-panels-product-status-text">Out of stock</div>
                    @endif
                </div>
            </div>
            <div class="solar-panels-product-action" data-product-id="{{ $product->id }}">
            @if($product->stock_quantity > 0)   
            <div class="solar-panels-product-action-link add-to-cart-btn" data-product-id="{{ $product->id }}" style="cursor: pointer;">
                    <div class="solar-panels-product-action-text">ADD TO CART</div>
                </div>
            </div>
            @else
             <div class="solar-panels-product-action-link" style="cursor: pointer;">
                    <div class="solar-panels-product-action-text disabled">OUT OF STOCK</div>
                </div>
            </div>
            @endif 
        </div>
        @endforeach
     

    </div>


</div>
<div class="solar-footer">
    <div class="solar-footer-div">
        <div class="solar-footer-main" style="background-image:url('/homepage/images/home/pay-online.png');background-size:cover">
            <div class="solar-footer-main-content">
                <div class="solar-footer-main-text">Pay Online</div>
                <p class="solar-footer-main-subtext">You can make quick payments on Oplug</p>
            </div>
            <div class="solar-footer-shop-now">
                <div class="solar-footer-shop-now-text">SHOP NOW</div>
            </div>
        </div>
        <div class="solar-footer-png" style="background-image:url('/homepage/images/home/banner3.png');background-size:cover">
            <div class="solar-footer-newsletter">
                <div class="solar-footer-newsletter-content">
                    <div class="solar-footer-newsletter-title">Stay Updated</div>
                    <p class="solar-footer-newsletter-subtext">Enter your email to signup for our newsletter</p>
                </div>
                <form class="solar-footer-newsletter-form" id="newsletterForm">
                    <div class="solar-footer-newsletter-input-wrapper">
                        <input type="email" class="solar-footer-newsletter-input" placeholder="Enter your email address" required>
                        <button type="submit" class="solar-footer-newsletter-button">Subscribe</button>
                    </div>
                    <div class="solar-footer-newsletter-message" id="newsletterMessage"></div>
                </form>
            </div>
        </div>
    </div>
    <div class="solar-footer-recently-viewed">
        <div class="solar-footer-recently-viewed-header">
            <div class="solar-footer-recently-viewed-title">RECENTLY VIEWED</div>
            <div class="solar-footer-view-all">View all</div>
        </div>
        <div class="solar-footer-scrolling">
            @if($recentProducts && $recentProducts->count() > 0)
            @foreach($recentProducts as $product)
            @php
            $images = json_decode($product->image, true);
            $firstImage = is_array($images) && !empty($images) ? $images[0] : null;
            $imageUrl = $firstImage ? 'https://www.oplugenergies.com/oplug_files/public/uploads/products/' . $firstImage : asset('homepage/images/default-product.png');
            @endphp
            <a href="{{ route('prd', $product->slug) }}" class="solar-footer-product" style="text-decoration: none; color: inherit;">
                <div class="solar-footer-product-img" style="background-image: url('{{ $imageUrl }}'); background-size: cover; background-position: center;"></div>
                <div class="solar-footer-prd">
                    <div class="solar-footer-product-title">
                        <div class="solar-footer-product-title-text">{{ Str::limit($product->name, 25) }}</div>
                    </div>
                    <div class="solar-footer-product-price">
                        @if($product->discount_price && $product->discount_price < $product->price)
                            ₦{{ number_format($product->discount_price, 0) }}
                            @else
                            ₦{{ number_format($product->price, 0) }}
                            @endif
                    </div>
                </div>
            </a>
            @endforeach
            @else
            <div class="solar-footer-product">
                <div class="solar-footer-product-img"></div>
                <div class="solar-footer-prd">
                    <div class="solar-footer-product-title">
                        <div class="solar-footer-product-title-text">No Recent Products</div>
                    </div>
                    <div class="solar-footer-product-price">₦0</div>
                </div>
            </div>
            @endif
        </div>

    </div>

    <p class="solar-footer-description">
        Affordable Solar Panels, Inverters &amp; Batteries – Oplug Solar Store<br />
        At Oplug, we provide high-quality solar energy products including monocrystalline and polycrystalline panels, hybrid inverters, lithium-ion batteries, and complete off-grid solar kits. Enjoy professional installation, fast delivery in Lagos and across Nigeria, and energy solutions built to last.<br />
        Go solar with Oplug – your one-stop shop for clean energy.
    </p>
</div>

@endsection
@section('script')
<script src="{{ asset('homepage/js/image-gallery.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get the scrolling container and arrow buttons for categories section
        const scrollingContainer = document.querySelector('.scrolling');
        const leftArrow = document.querySelector('.vector-wrapper');
        const rightArrow = document.querySelector('.img-wrapper');

        if (scrollingContainer && leftArrow && rightArrow) {
            // Left arrow click - scroll left
            leftArrow.addEventListener('click', () => {
                scrollingContainer.scrollBy({
                    left: -150,
                    behavior: 'smooth'
                });
            });

            // Right arrow click - scroll right
            rightArrow.addEventListener('click', () => {
                scrollingContainer.scrollBy({
                    left: 150,
                    behavior: 'smooth'
                });
            });
        }

        // Get the brand-new section scrolling container and arrow buttons
        const brandScrollingContainer = document.querySelector('.brand-new-tabpanel');
        const brandLeftArrows = document.querySelectorAll('.brand-new-vector-wrapper');

        if (brandScrollingContainer && brandLeftArrows.length >= 2) {
            // First arrow (left arrow) - scroll left
            brandLeftArrows[0].addEventListener('click', () => {
                brandScrollingContainer.scrollBy({
                    left: -300,
                    behavior: 'smooth'
                });
            });

            // Second arrow (right arrow) - scroll right
            brandLeftArrows[1].addEventListener('click', () => {
                brandScrollingContainer.scrollBy({
                    left: 300,
                    behavior: 'smooth'
                });
            });
        }

        // Newsletter form submission
        const newsletterForm = document.getElementById('newsletterForm');
        const newsletterMessage = document.getElementById('newsletterMessage');

        if (newsletterForm) {
            newsletterForm.addEventListener('submit', async function(e) {
                e.preventDefault();

                const emailInput = this.querySelector('.solar-footer-newsletter-input');
                const email = emailInput.value.trim();

                if (!email) {
                    showMessage('Please enter your email address.', 'error');
                    return;
                }

                // Show loading state
                const submitButton = this.querySelector('.solar-footer-newsletter-button');
                const originalText = submitButton.textContent;
                submitButton.textContent = 'Subscribing...';
                submitButton.disabled = true;

                try {
                    // Replace this URL with your actual newsletter API endpoint
                    const response = await fetch('/api/newsletter/subscribe', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]')?.getAttribute('content') || ''
                        },
                        body: JSON.stringify({
                            email: email
                        })
                    });

                    if (response.ok) {
                        showMessage('Thank you for subscribing to our newsletter!', 'success');
                        emailInput.value = '';
                    } else {
                        showMessage('Something went wrong. Please try again later.', 'error');
                    }
                } catch (error) {
                    showMessage('Network error. Please check your connection and try again.', 'error');
                } finally {
                    // Reset button state
                    submitButton.textContent = originalText;
                    submitButton.disabled = false;
                }
            });
        }

        function showMessage(message, type) {
            if (newsletterMessage) {
                newsletterMessage.textContent = message;
                newsletterMessage.className = `solar-footer-newsletter-message ${type}`;

                // Hide message after 5 seconds
                setTimeout(() => {
                    newsletterMessage.className = 'solar-footer-newsletter-message';
                }, 5000);
            }
        }
    });
</script>

<!-- Cart functionality -->
<script src="{{ asset('js/cart.js') }}"></script>
@endsection